FROM node:18-slim

# Instalar Python y pip
RUN apt-get update && apt-get install -y python3 python3-pip

# Crear carpeta base
WORKDIR /app

# Copiar todo el código de src (incluye paginaweb y AI)
COPY src/ ./src/

# 🐍 Instalar dependencias Python
WORKDIR /app/src/paginaweb/Backend
RUN pip3 install --no-cache-dir -r requirements.txt

# 🟢 Instalar dependencias JS desde paginaweb (donde está package.json)
WORKDIR /app/src/paginaweb
RUN npm install

# Volver al Backend para ejecutar Node.js
WORKDIR /app/src/paginaweb/Backend
CMD ["node", "server.js"]
